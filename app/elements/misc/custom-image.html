<dom-module id="custom-image">
    <template>
        <style>
            :host {
                display: block;
            }
            paper-button {
                background-color: var(--primary-background-color);
                color: var(--dark-primary-color);
            }
        </style>
        <!-- <img src="{{src}}" alt="" id="image" class="responsive-img"> -->
        <div class="row center">
            <div class="col s12">
                <iron-image id="image" src="{{src}}" class="responsive-img" preload ></iron-image>
            </div>
            <div class="col s12">
                <paper-button on-tap="toggle">Toggle Image</paper-button>
            </div>
        </div>
    </template>
    <script>
        Polymer({
            is: 'custom-image',
            behaviors: [
                Polymer.NeonAnimationRunnerBehavior
            ],
            properties: {
                opened: {
                    value: true
                },
                animationConfig: {
                    value: function() {
                        return {
                            'entry': {
                                name: 'fade-in-animation',
                                node: this.$.image
                            },
                            'exit': {
                                name: 'fade-out-animation',
                                node: this.$.image
                            }
                        };
                    }
                }
            },
            listeners: {
                'neon-animation-finish': '_onNeonAnimationFinish'
            },
            toggle: function () {
                this.opened = !this.opened;
                if (this.opened) {
                    this.$.image.style.display = 'inline-block';
                }
                this.playAnimation(this.opened ? 'entry' : 'exit');
            },
            ready: function () {
                this.playAnimation('entry', this.test, this.test2);
            },
            test: function() {
            },
            _onNeonAnimationFinish: function () {
                if (!this.opened) {
                    this.$.image.style.display = 'none';
                }
            }
        });
    </script>
</dom-module>