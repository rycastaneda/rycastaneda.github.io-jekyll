<dom-module id="todo-data">
<template>
    <iron-localstorage name="my-app-storage"
        value="{{todos}}"
        on-iron-localstorage-load-empty="initializeDefaultTodos"
      ></iron-localstorage>
    <iron-ajax url="https://todoapp-74ab8.firebaseio.com/.json" handle-as="json" on-response="handleResponse" auto></iron-ajax>
</template>
    <script>
        Polymer({
            is: 'todo-data',
            properties: {
                todos: {
                    type: Object,
                    notify: true
                },
            },
            initializeDefaultTodos: function () {
                this.todos = {
                    current_todo: 0,
                    list: [
                        {
                            label: 'Sample todo data',
                            isComplete: true
                        },
                        {
                            label: 'Sample todo data #2',
                            isComplete: false
                        }
                    ]
                };
            },
            handleResponse: function (data) {
                this.todos = data.detail.response;
            },
            selectedTodo: function (event) {
                this.todos.current_todo = event.detail.index;
                this.currentTodo = this.todos.list[this.todos.current_todo];
            }

        });
    </script>
</dom-module>